<html>
  <title>Manage Servers</title>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="righty-font/righty-stylesheet.css" type="text/css" charset="utf-8"/>
    <link rel="stylesheet" href="kings/kings-stylesheet.css" type="text/css" charset="utf-8"/>
    <link rel="stylesheet" href="demon/demon-stylesheet.css" type="text/css" charset="utf-8"/>
    <link rel="stylesheet" href="easyFonts.css" type="text/css" charset="utf-8"/>
    <link rel="icon" type="image/x-icon" href="InLinkBadge.png">
  </head>
  <body style="background-color:black;">
    <H1 class="whiteRight" align="center">Manage servers</H1><br>
    <style>
      .cell {
        background-color:rgb(33,38,45);
        border-radius:15px;
        
      }
    </style>
    <div id="servers">
      <div id="activeServers" align="center">
        <div class="cell" align="center">
          <H3 class="whiteRight" align="center" style="position:relative; top:10px; left:10px; line-height: 0.8;">Example</H3>
          <H4 id="status4" class="whiteRight" style="position:relative; left:10px;">Idk</H4><br>
          <button style="position:relative; left:10px; background-color:green; border-radius:15px;" class="blackRight">Resume</button>
          <button style="position:relative; left:10px; background-color:yellow; border-radius:15px;" class="blackRight">Suspend</button>
          <button style="position:relative; left:10px; background-color:red; border-radius:15px;" class="blackRight">Delete</button>
          <button style="position:relative; left:10px; background-color:orange; border-radius:15px;" class="blackRight">Restart</button>
          <button style="position:relative; left:10px; background-color:yellow; border-radius:15px;" class="blackRight">Redeploy</button>
        </div>
      </div>
    </div>
    <script src="redirects.js">
    </script>
    <script>
      const services = [
        { serviceName: "budget", serviceId: "srv-cgtvqlt269vbmeo540eg", serviceNum: "4"},
        { serviceName: "campaign", serviceId: "srv-cgtvqqt269vbmeo54n9g", serviceNum: "5"},
        { serviceName: "head", serviceId: "srv-cgs5i0g2qv20m9ntkj1g", serviceNum: "6"},
        { serviceName: "overcharge", serviceId: "srv-cgs5igrk9u53u204dddg", serviceNum: "7"},
        { serviceName: "project", serviceId: "srv-cgs5irjk9u53u204focg", serviceNum: "8"},
        { serviceName: "ignite", serviceId: "srv-cgs5j6ks3fvk982tlbtg", serviceNum: "9"},
        { serviceName: "certian", serviceId: "srv-cgs5jj82qv20m9nukq00", serviceNum: "10"},
        { serviceName: "refer", serviceId: "srv-cgs5jqss3fvk982tq8rg", serviceNum: "11"},
        { serviceName: "contradiction", serviceId: "srv-cgs5k2rk9u53u204p8l0", serviceNum: "12"},
        { serviceName: "assault", serviceId: "srv-cgs5kcss3fvk982u04ag", serviceNum: "13"},
        { serviceName: "accent", serviceId: "srv-cgs5kjbk9u53u204sn1g", serviceNum: "14"},
        { serviceName: "committee", serviceId: "srv-cgs5krbk9u53u204uaug", serviceNum: "15"},
        { serviceName: "contrast", serviceId: "srv-cgs5l34s3fvk982u5k50", serviceNum: "16"},
        { serviceName: "ethan", serviceId: "srv-cgs5lbjk9u53u2051ui0", serviceNum: "17"},
        { serviceName: "floor", serviceId: "srv-cgs5lp4s3fvk982u914g", serviceNum: "18"},
        { serviceName: "promotion", serviceId: "srv-cgt9s7d269vbmetbe80g", serviceNum: "19"},
        { serviceName: "constitution", serviceId: "srv-cgt9sgl269vbmetbeisg", serviceNum: "20"},
        { serviceName: "push", serviceId: "srv-cgtvqdt269vbmeo52hs0", serviceNum: "21"},
        { serviceName: "side", serviceId: "srv-cgtvq2t269vbmeo51ms0", serviceNum: "22"},
        { serviceName: "exploration", serviceId: "srv-cgt9ssd269vbmetbfep0", serviceNum: "23"},
        { serviceName: "engineer", serviceId: "srv-cgtdttt269vbmettnktg", serviceNum: "24"},
        { serviceName: "undertake", serviceId: "srv-cgtvljt269vbmeo46e60", serviceNum: "25"},
        { serviceName: "rare", serviceId: "srv-cgtvngqut4mcfrnu96kg", serviceNum: "26"},
        { serviceName: "promise", serviceId: "srv-cgtvntaut4mcfrnuccug", serviceNum: "27"},
        { serviceName: "dough", serviceId: "srv-cgtvp9d269vbmeo4s8b0", serviceNum: "28"},
        { serviceName: "ancestor", serviceId: "srv-cgtvpiaut4mcfrnun8f0", serviceNum: "29"},
        { serviceName: "drift", serviceId: "srv-cgtvpql269vbmeo50qgg", serviceNum: "30"},
        { serviceName: "nightmare", serviceId: "srv-cgtvr2d269vbmeo56u2g", serviceNum: "31"},
        { serviceName: "desk", serviceId: "srv-cgtvr85269vbmeo57crg", serviceNum: "32"},
        { serviceName: "hero", serviceId: "srv-cgtvrdt269vbmeo59b50", serviceNum: "33"},
        { serviceName: "personality", serviceId: "srv-cgtvrit269vbmeo5a3c0", serviceNum: "34"},
        { serviceName: "army", serviceId: "srv-cgtvroaut4mcfrnv7kmg", serviceNum: "35"},
        { serviceName: "orgy", serviceId: "srv-cgtvrtt269vbmeo5boig", serviceNum: "36"},
        { serviceName: "relation", serviceId: "srv-cgtvs3d269vbmeo5cnog", serviceNum: "37"},
        { serviceName: "authority", serviceId: "srv-cgtvs8t269vbmeo5dpv0", serviceNum: "38"},
        { serviceName: "automatic", serviceId: "srv-cgtvtbd269vbmeo5kfdg", serviceNum: "39"}
      ]

      services.forEach((service) => {
        var column = document.getElementById("activeServers");
        
        var cell = document.createElement("div");
        cell.setAttribute("class" ,"cell");
        cell.setAttribute("align" ,"center");
        cell.setAttribute("style" ,"width:450px");
        
        var serviceTitle = document.createElement("H3");
        serviceTitle.setAttribute("class" ,"whiteRight");
        serviceTitle.setAttribute("align" ,"center");
        serviceTitle.setAttribute("style" ,"position:relative; top:10px; left:10px; line-height: 0.8;");
        serviceTitle.innerHTML = service.serviceName;

        var serviceStatus = document.createElement("H4");
        serviceStatus.setAttribute("id" ,"status" + serviceNum);
        serviceStatus.setAttribute("class" ,"whiteRight");
        serviceStatus.setAttribute("style" ,"position:relative; left:10px;");
        serviceStatus.innerHTML = "idk";

        var resumeButton = document.createElement("button");
        resumeButton.setAttribute("class" ,"blackRight");
        resumeButton.setAttribute("style" ,"position:relative; left:10px; background-color:green; border-radius:15px;");
        resumeButton.setAttribute("onclick" ,"resumeService(" + service.serviceNum + ")");
        resumeButton.innerHTML = "Resume";
        
        var suspendButton = document.createElement("button");
        suspendButton.setAttribute("class" ,"blackRight");
        suspendButton.setAttribute("style" ,"position:relative; left:10px; background-color:yellow; border-radius:15px;");
        suspendButton.setAttribute("onclick" ,"suspendService(" + service.serviceNum + ")");
        suspendButton.innerHTML = "Suspend";
        
        var deleteButton = document.createElement("button");
        deleteButton.setAttribute("class" ,"blackRight");
        deleteButton.setAttribute("style" ,"position:relative; left:10px; background-color:red; border-radius:15px;");
        deleteButton.setAttribute("onclick" ,"deleteService(" + service.serviceNum + ")");
        deleteButton.innerHTML = "Delete";
        
        var restartButton = document.createElement("button");
        restartButton.setAttribute("class" ,"blackRight");
        restartButton.setAttribute("style" ,"position:relative; left:10px; background-color:orange; border-radius:15px;");
        restartButton.setAttribute("onclick" ,"restartService(" + service.serviceNum + ")");
        restartButton.innerHTML = "Restart";
        
        var redeployButton = document.createElement("button");
        redeployButton.setAttribute("class" ,"blackRight");
        redeployButton.setAttribute("style" ,"position:relative; left:10px; background-color:yellow; border-radius:15px;");
        redeployButton.setAttribute("onclick" ,"redeployService(" + service.serviceNum + ")");
        redeployButton.innerHTML = "Redeploy";
        
        cell.appendChild(serviceTitle);
        cell.appendChild(serviceStatus);
        cell.appendChild(resumeButton);
        cell.appendChild(suspendButton);
        cell.appendChild(deleteButton);
        cell.appendChild(restartButton);
        cell.appendChild(redeployButton);
        column.appendChild(cell);
      });
      
      function suspendService(num) {
        services.forEach((service) => {
          if (service.serviceNum == num) {
            const options = {
              method: 'POST',
              headers: {
                accept: 'application/json',
                authorization: 'Bearer rnd_mnZ1CcN0lVMv6surrhUb0uupsNsc'
              }
            };
            
            fetch('https://api.render.com/v1/services/'+ service.serviceId +'/suspend', options)
            .then(response => response.json())
            .then(response => console.log(response))
            .catch(err => console.error(err));
          };
        });
      };
      function deleteService() {
        services.forEach((service) => {
          if (service.serviceNum == num) {
            const options = {
              method: 'DELETE',
              headers: {
                accept: 'application/json',
                authorization: 'Bearer rnd_mnZ1CcN0lVMv6surrhUb0uupsNsc'
              }
            };

            fetch('https://api.render.com/v1/services/' + service.serviceId, options)
            .then(response => response.json())
            .then(response => console.log(response))
            .catch(err => console.error(err));
          };
        });
      };
      function resumeService() {
        services.forEach((service) => {
          if (service.serviceNum == num) {
            const options = {
              method: 'POST',
              headers: {
                accept: 'application/json',
                authorization: 'Bearer rnd_mnZ1CcN0lVMv6surrhUb0uupsNsc'
              }
            };

            fetch('https://api.render.com/v1/services/'+ service.serviceId +'/resume', options)
            .then(response => response.json())
            .then(response => console.log(response))
            .catch(err => console.error(err));
          };
        });
      };
      function restartService() {
        services.forEach((service) => {
          if (service.serviceNum == num) {
            const options = {
              method: 'POST',
              headers: {
                accept: 'application/json',
                authorization: 'Bearer rnd_mnZ1CcN0lVMv6surrhUb0uupsNsc'
              }
            };

            fetch('https://api.render.com/v1/services/' + service.serviceId + '/restart', options)
            .then(response => response.json())
            .then(response => console.log(response))
            .catch(err => console.error(err));
          }
        });
      };
      function redeployService() {
        services.forEach((service) => {
          if (service.serviceNum == num) {
            const options = {
              method: 'POST',
              headers: {
                accept: 'application/json',
                'content-type': 'application/json',
                authorization: 'Bearer rnd_mnZ1CcN0lVMv6surrhUb0uupsNsc'
              }
            };

            fetch('https://api.render.com/v1/services/'+ service.serviceId +'/deploys', options)
            .then(response => response.json())
            .then(response => console.log(response))
            .catch(err => console.error(err));
          };
        });
      };
      function getStatus() {
        services.forEach((service) => {
          const options = {
            method: 'GET',
            headers: {
              accept: 'application/json',
              authorization: 'Bearer rnd_mnZ1CcN0lVMv6surrhUb0uupsNsc'
            }
          };

          fetch('https://api.render.com/v1/services/' + service.serviceId, options)
          .then(response => response.json())
          .then(response => console.log(response))
          .then(
            if (response.suspended == "not_suspended") {
              document.getElementById("status4").innerHTML = "Active";
            } else if (response.suspended == "suspended") {
              document.getElementById("status4").innerHTML = "Not Active";
            }
          )
          .catch(err => console.error(err));
        })
      }
      
      let interval = setInterval(getStatus(), 200);
      
    </script>
  </body>
</html>
